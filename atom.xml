<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>http://weakcc.github.io</id>
    <title>è…°ç›é†‹</title>
    <updated>2021-10-30T09:47:30.707Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="http://weakcc.github.io"/>
    <link rel="self" href="http://weakcc.github.io/atom.xml"/>
    <subtitle>æ¸©æ•…è€ŒçŸ¥æ–°</subtitle>
    <logo>http://weakcc.github.io/images/avatar.png</logo>
    <icon>http://weakcc.github.io/favicon.ico</icon>
    <rights>All rights reserved 2021, è…°ç›é†‹</rights>
    <entry>
        <title type="html"><![CDATA[Selenium ä»å…¥é—¨åˆ°æ”¾å¼ƒ]]></title>
        <id>http://weakcc.github.io/post/selenium-cong-ru-men-dao-fang-qi/</id>
        <link href="http://weakcc.github.io/post/selenium-cong-ru-men-dao-fang-qi/">
        </link>
        <updated>2021-10-30T08:14:39.000Z</updated>
        <content type="html"><![CDATA[<h1 id="å®‰è£…æµè§ˆå™¨é©±åŠ¨">å®‰è£…æµè§ˆå™¨é©±åŠ¨</h1>
<p><a href="https://chromedriver.storage.googleapis.com/index.html">Chrome æµè§ˆå™¨é©±åŠ¨</a><br>
<a href="https://github.com/mozilla/geckodriver/releases">Firefox æµè§ˆå™¨é©±åŠ¨</a><br>
<a href="http://selenium-release.storage.googleapis.com/index.html">IE æµè§ˆå™¨é©±åŠ¨</a><br>
<a href="https://developer.microsoft.com/en-us/microsoft-edge/tools/webdriver/">Edge æµè§ˆå™¨é©±åŠ¨</a><br>
<a href="https://phantomjs.org/">PhantomJS æµè§ˆå™¨é©±åŠ¨</a><br>
<a href="https://github.com/operasoftware/operachromiumdriver/releases">Opera æµè§ˆå™¨é©±åŠ¨</a></p>
<p>æµ‹è¯•</p>
<pre><code class="language-python">from selenium import webdriver

# Chromeæµè§ˆå™¨
driver = webdriver.Chrome()
driver.get('https://www.baidu.com/')
</code></pre>
<h1 id="å®šä½é¡µé¢å…ƒç´ ">å®šä½é¡µé¢å…ƒç´ </h1>
<h2 id="id-å®šä½">id å®šä½</h2>
<pre><code class="language-html">&lt;input id=&quot;toolbar-search-input&quot; autocomplete=&quot;off&quot; type=&quot;text&quot; value=&quot;&quot; placeholder=&quot;C++éš¾åœ¨å“ªé‡Œï¼Ÿ&quot;&gt;
</code></pre>
<pre><code class="language-python">driver.find_element_by_id('toolbar-search-input')
</code></pre>
<h2 id="name-å®šä½">name å®šä½</h2>
<pre><code class="language-html">&lt;meta name=&quot;keywords&quot; content=&quot;CSDNåšå®¢,CSDNå­¦é™¢,CSDNè®ºå›,CSDNç›´æ’­&quot;&gt;
</code></pre>
<pre><code class="language-python">driver.find_element_by_name(&quot;keywords&quot;)
</code></pre>
<h2 id="class-å®šä½">class å®šä½</h2>
<pre><code class="language-html">&lt;div class=&quot;toolbar-search-container&quot;&gt;
</code></pre>
<pre><code class="language-python">driver.find_element_by_class_name(&quot;toolbar-search-container&quot;)
</code></pre>
<h2 id="tag-å®šä½">tag å®šä½</h2>
<pre><code class="language-html">&lt;div class=&quot;toolbar-search-container&quot;&gt;
</code></pre>
<pre><code class="language-python">driver.find_element_by_tag_name(&quot;div&quot;)
</code></pre>
<h2 id="xpath-å®šä½">xpath å®šä½</h2>
<pre><code class="language-html">&lt;html&gt;
  &lt;head&gt;...&lt;head/&gt;
  &lt;body&gt;
    &lt;div id=&quot;csdn-toolbar&quot;&gt;
      &lt;div class=&quot;toolbar-inside&quot;&gt;
        &lt;div class=&quot;toolbar-container&quot;&gt;
          &lt;div class=&quot;toolbar-container-left&quot;&gt;...&lt;/div&gt;
          &lt;div class=&quot;toolbar-container-middle&quot;&gt;
            &lt;div class=&quot;toolbar-search onlySearch&quot;&gt;
			&lt;div class=&quot;toolbar-search-container&quot;&gt;
				&lt;input id=&quot;toolbar-search-input&quot; autocomplete=&quot;off&quot; type=&quot;text&quot; value=&quot;&quot; placeholder=&quot;C++éš¾åœ¨å“ªé‡Œï¼Ÿ&quot;&gt;
</code></pre>
<pre><code class="language-python"># ç»å¯¹è·¯å¾„ï¼ˆå±‚çº§å…³ç³»ï¼‰å®šä½
driver.find_element_by_xpath(
	&quot;/html/body/div/div/div/div[2]/div/div/input[1]&quot;)

# åˆ©ç”¨å…ƒç´ å±æ€§å®šä½
driver.find_element_by_xpath(
	&quot;//*[@id='toolbar-search-input']&quot;))

# å±‚çº§+å…ƒç´ å±æ€§å®šä½
driver.find_element_by_xpath(
	&quot;//div[@id='csdn-toolbar']/div/div/div[2]/div/div/input[1]&quot;)

# é€»è¾‘è¿ç®—ç¬¦å®šä½
driver.find_element_by_xpath(
	&quot;//*[@id='toolbar-search-input' and @autocomplete='off']&quot;)
</code></pre>
<h2 id="css-å®šä½">css å®šä½</h2>
<table>
<thead>
<tr>
<th style="text-align:center">æ–¹æ³•</th>
<th style="text-align:center">ä¾‹å­</th>
<th style="text-align:center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">.class</td>
<td style="text-align:center">.toolbar-search-container</td>
<td style="text-align:center">é€‰æ‹© class = 'toolbar-search-container' çš„æ‰€æœ‰å…ƒç´ </td>
</tr>
<tr>
<td style="text-align:center">#id</td>
<td style="text-align:center">#toolbar-search-input</td>
<td style="text-align:center">é€‰æ‹© id = 'toolbar-search-input' çš„å…ƒç´ </td>
</tr>
<tr>
<td style="text-align:center">*</td>
<td style="text-align:center">*</td>
<td style="text-align:center">é€‰æ‹©æ‰€æœ‰å…ƒç´ </td>
</tr>
<tr>
<td style="text-align:center">element</td>
<td style="text-align:center">input</td>
<td style="text-align:center">é€‰æ‹©æ‰€æœ‰ &lt;input&gt; å…ƒç´ </td>
</tr>
<tr>
<td style="text-align:center">element&gt;element</td>
<td style="text-align:center">div&gt;input</td>
<td style="text-align:center">é€‰æ‹©çˆ¶å…ƒç´ ä¸º &lt;div&gt; çš„æ‰€æœ‰ &lt;input&gt; å…ƒç´ </td>
</tr>
<tr>
<td style="text-align:center">element+element</td>
<td style="text-align:center">div+input</td>
<td style="text-align:center">é€‰æ‹©åŒä¸€çº§ä¸­åœ¨ &lt;div&gt; ä¹‹åçš„æ‰€æœ‰ &lt;input&gt; å…ƒç´ </td>
</tr>
<tr>
<td style="text-align:center">[attribute=value]</td>
<td style="text-align:center">type='text'</td>
<td style="text-align:center">é€‰æ‹© type = 'text' çš„æ‰€æœ‰å…ƒç´ </td>
</tr>
</tbody>
</table>
<pre><code class="language-python">driver.find_element_by_css_selector('#toolbar-search-input')
driver.find_element_by_css_selector('html&gt;body&gt;div&gt;div&gt;div&gt;div&gt;div&gt;div&gt;input')
</code></pre>
<h2 id="link-å®šä½">link å®šä½</h2>
<p><code>link</code> ä¸“é—¨ç”¨æ¥å®šä½æ–‡æœ¬é“¾æ¥ï¼Œå‡å¦‚è¦å®šä½ä¸‹é¢è¿™ä¸€æ ‡ç­¾ã€‚</p>
<pre><code class="language-html">&lt;div class=&quot;practice-box&quot; data-v-04f46969=&quot;&quot;&gt;åŠ å…¥ï¼æ¯æ—¥ä¸€ç»ƒ&lt;/div&gt;
</code></pre>
<pre><code class="language-python">driver.find_element_by_link_text(&quot;åŠ å…¥ï¼æ¯æ—¥ä¸€ç»ƒ&quot;)
</code></pre>
<h2 id="partial_link-å®šä½">partial_link å®šä½</h2>
<p><code>partial_link</code> ç¿»è¯‘è¿‡æ¥å°±æ˜¯â€œéƒ¨åˆ†é“¾æ¥â€ï¼Œå¯¹äºæœ‰äº›æ–‡æœ¬å¾ˆé•¿ï¼Œè¿™æ—¶å€™å°±å¯ä»¥åªæŒ‡å®šéƒ¨åˆ†æ–‡æœ¬å³å¯å®šä½ï¼ŒåŒæ ·ä½¿ç”¨åˆšæ‰çš„ä¾‹å­ã€‚</p>
<pre><code class="language-html">&lt;div class=&quot;practice-box&quot; data-v-04f46969=&quot;&quot;&gt;åŠ å…¥ï¼æ¯æ—¥ä¸€ç»ƒ&lt;/div&gt;
</code></pre>
<pre><code class="language-python">driver.find_element_by_partial_link_text(&quot;åŠ å…¥&quot;)
</code></pre>
<h1 id="æµè§ˆå™¨æ§åˆ¶">æµè§ˆå™¨æ§åˆ¶</h1>
<h2 id="ä¿®æ”¹æµè§ˆå™¨çª—å£å¤§å°">ä¿®æ”¹æµè§ˆå™¨çª—å£å¤§å°</h2>
<p><code>webdriver</code> æä¾› <code>set_window_size()</code> æ–¹æ³•æ¥ä¿®æ”¹æµè§ˆå™¨çª—å£çš„å¤§å°ã€‚</p>
<pre><code class="language-python">from selenium import webdriver

# Chromeæµè§ˆå™¨
driver = webdriver.Chrome()
driver.get('https://www.csdn.net/')
# è®¾ç½®æµè§ˆå™¨æµè§ˆå™¨çš„å®½é«˜ä¸ºï¼š600x800
driver.set_window_size(600, 800)
</code></pre>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>maximize_window()</code> æ–¹æ³•å¯ä»¥å®ç°æµè§ˆå™¨å…¨å±æ˜¾ç¤º<br>
from selenium import webdriver</p>
<pre><code class="language-python"># Chromeæµè§ˆå™¨
driver = webdriver.Chrome()
driver.get('https://www.csdn.net/')
# è®¾ç½®æµè§ˆå™¨æµè§ˆå™¨çš„å®½é«˜ä¸ºå…¨å±
driver.maximize_window()
</code></pre>
<h2 id="æµè§ˆå™¨å‰è¿›åé€€">æµè§ˆå™¨å‰è¿›&amp;åé€€</h2>
<p><code>webdriver</code> æä¾› <code>back</code> å’Œ <code>forward</code> æ–¹æ³•æ¥å®ç°é¡µé¢çš„åé€€ä¸å‰è¿›</p>
<pre><code class="language-python">from selenium import webdriver
from time import sleep

driver = webdriver.Chrome()

# è®¿é—®CSDNé¦–é¡µ
driver.get('https://www.csdn.net/')
sleep(2)
#è®¿é—®CSDNä¸ªäººä¸»é¡µ
driver.get('https://blog.csdn.net/qq_43965708')
sleep(2)
#è¿”å›ï¼ˆåé€€ï¼‰åˆ°CSDNé¦–é¡µ
driver.back()
sleep(2)
#å‰è¿›åˆ°ä¸ªäººä¸»é¡µ
driver.forward()
</code></pre>
<h2 id="æ–°çš„æ ‡ç­¾é¡µæ‰“å¼€">æ–°çš„æ ‡ç­¾é¡µæ‰“å¼€</h2>
<p>å¦‚æœæƒ³çš„è¯ä¹Ÿå¯ä»¥åœ¨æ–°çš„æ ‡ç­¾é¡µä¸­æ‰“å¼€æ–°çš„é“¾æ¥ï¼Œä½†éœ€è¦æ›´æ”¹ä¸€ä¸‹ä»£ç ï¼Œæ‰§è¡Œ js è¯­å¥æ¥æ‰“å¼€æ–°çš„æ ‡ç­¾ã€‚</p>
<pre><code class="language-python"># åœ¨åŸé¡µé¢æ‰“å¼€
driver.get('https://blog.csdn.net/qq_43965708')

# æ–°æ ‡ç­¾ä¸­æ‰“å¼€
js = &quot;window.open('https://blog.csdn.net/qq_43965708')&quot;
driver.execute_script(js)
</code></pre>
<h2 id="æµè§ˆå™¨åˆ·æ–°">æµè§ˆå™¨åˆ·æ–°</h2>
<p>å¯ä»¥ä½¿ç”¨ <code>refresh()</code> æ¥åˆ·æ–°å½“å‰é¡µé¢ã€‚</p>
<pre><code class="language-python"># åˆ·æ–°é¡µé¢
driver.refresh()
</code></pre>
<h2 id="æµè§ˆå™¨çª—å£åˆ‡æ¢">æµè§ˆå™¨çª—å£åˆ‡æ¢</h2>
<p>åœ¨å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éƒ½éœ€è¦ç”¨åˆ°çª—å£åˆ‡æ¢ï¼Œæ¯”å¦‚ï¼šå½“æˆ‘ä»¬ç‚¹å‡»æ³¨å†ŒæŒ‰é’®æ—¶ï¼Œå®ƒä¸€èˆ¬ä¼šæ‰“å¼€ä¸€ä¸ªæ–°çš„æ ‡ç­¾é¡µï¼Œä½†å®é™…ä¸Šä»£ç å¹¶æ²¡æœ‰åˆ‡æ¢åˆ°æœ€æ–°é¡µé¢ä¸­ï¼Œè¿™æ—¶ä½ å¦‚æœè¦å®šä½æ³¨å†Œé¡µé¢çš„æ ‡ç­¾å°±ä¼šå‘ç°å®šä½ä¸åˆ°ï¼Œè¿™æ—¶å°±éœ€è¦å°†å®é™…çª—å£åˆ‡æ¢åˆ°æœ€æ–°æ‰“å¼€çš„é‚£ä¸ªçª—å£ã€‚æˆ‘ä»¬å…ˆè·å–å½“å‰å„ä¸ªçª—å£çš„å¥æŸ„ï¼Œè¿™äº›ä¿¡æ¯çš„ä¿å­˜é¡ºåºæ˜¯æŒ‰ç…§æ—¶é—´æ¥çš„ï¼Œæœ€æ–°æ‰“å¼€çš„çª—å£æ”¾åœ¨æ•°ç»„çš„æœ«å°¾ï¼Œè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥å®šä½åˆ°æœ€æ–°æ‰“å¼€çš„é‚£ä¸ªçª—å£äº†ã€‚</p>
<pre><code class="language-python"># è·å–æ‰“å¼€çš„å¤šä¸ªçª—å£å¥æŸ„
windows = driver.window_handles
# åˆ‡æ¢åˆ°å½“å‰æœ€æ–°æ‰“å¼€çš„çª—å£
driver.switch_to.window(windows[-1])
</code></pre>
<h2 id="å¸¸è§æ“ä½œ">å¸¸è§æ“ä½œ</h2>
<p>webdriverä¸­çš„å¸¸è§æ“ä½œæœ‰ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">æ–¹æ³•</th>
<th style="text-align:center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">send_keys()</td>
<td style="text-align:center">æ¨¡æ‹Ÿè¾“å…¥æŒ‡å®šå†…å®¹</td>
</tr>
<tr>
<td style="text-align:center">clear()</td>
<td style="text-align:center">æ¸…é™¤æ–‡æœ¬å†…å®¹</td>
</tr>
<tr>
<td style="text-align:center">is_displayed()</td>
<td style="text-align:center">åˆ¤æ–­è¯¥å…ƒç´ æ˜¯å¦å¯è§</td>
</tr>
<tr>
<td style="text-align:center">get_attribute()</td>
<td style="text-align:center">è·å–æ ‡ç­¾å±æ€§å€¼</td>
</tr>
<tr>
<td style="text-align:center">size</td>
<td style="text-align:center">è¿”å›å…ƒç´ çš„å°ºå¯¸</td>
</tr>
<tr>
<td style="text-align:center">text</td>
<td style="text-align:center">è¿”å›å…ƒç´ æ–‡æœ¬</td>
</tr>
</tbody>
</table>
<p>ğŸŒ°</p>
<pre><code class="language-python">from selenium import webdriver
from time import sleep

driver = webdriver.Chrome()

driver.get('https://www.csdn.net/')
sleep(2)
# å®šä½æœç´¢è¾“å…¥æ¡†
text_label = driver.find_element_by_xpath('//*[@id=&quot;toolbar-search-input&quot;]')

# åœ¨æœç´¢æ¡†ä¸­è¾“å…¥ Dreamä¸¶Killer
text_label.send_keys('Dreamä¸¶Killer')

sleep(2)
# æ¸…é™¤æœç´¢æ¡†ä¸­çš„å†…å®¹
text_label.clear()

# è¾“å‡ºæœç´¢æ¡†å…ƒç´ æ˜¯å¦å¯è§
print(text_label.is_displayed())
# è¾“å‡ºplaceholderçš„å€¼
print(text_label.get_attribute('placeholder'))

# å®šä½æœç´¢æŒ‰é’®
button = driver.find_element_by_xpath('//*[@id=&quot;toolbar-search-button&quot;]/span')
# è¾“å‡ºæŒ‰é’®çš„å¤§å°
print(button.size)
# è¾“å‡ºæŒ‰é’®ä¸Šçš„æ–‡æœ¬
print(button.text)

'''è¾“å‡ºå†…å®¹
True
pythoné¢è¯•100é—®
{'height': 32, 'width': 28}
æœç´¢
'''
</code></pre>
<h1 id="é¼ æ ‡æ§åˆ¶">é¼ æ ‡æ§åˆ¶</h1>
<p>åœ¨webdriver ä¸­ï¼Œé¼ æ ‡æ“ä½œéƒ½å°è£…åœ¨ActionChainsç±»ä¸­ï¼Œå¸¸è§æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">æ–¹æ³•</th>
<th style="text-align:center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">click()</td>
<td style="text-align:center">å•å‡»å·¦é”®</td>
</tr>
<tr>
<td style="text-align:center">context_click()</td>
<td style="text-align:center">å•å‡»å³é”®</td>
</tr>
<tr>
<td style="text-align:center">double_click()</td>
<td style="text-align:center">åŒå‡»</td>
</tr>
<tr>
<td style="text-align:center">drag_and_drop()</td>
<td style="text-align:center">æ‹–åŠ¨</td>
</tr>
<tr>
<td style="text-align:center">move_to_element()</td>
<td style="text-align:center">é¼ æ ‡æ‚¬åœ</td>
</tr>
<tr>
<td style="text-align:center">perform()</td>
<td style="text-align:center">æ‰§è¡Œæ‰€æœ‰ActionChainsä¸­å­˜å‚¨çš„åŠ¨ä½œ</td>
</tr>
</tbody>
</table>
<h2 id="å•å‡»å·¦é”®">å•å‡»å·¦é”®</h2>
<p>æ¨¡æ‹Ÿå®Œæˆå•å‡»é¼ æ ‡å·¦é”®çš„æ“ä½œï¼Œä¸€èˆ¬ç‚¹å‡»è¿›å…¥å­é¡µé¢ç­‰ä¼šç”¨åˆ°ï¼Œå·¦é”®ä¸éœ€è¦ç”¨åˆ° <code>ActionChains</code> ã€‚</p>
<pre><code class="language-python"># å®šä½æœç´¢æŒ‰é’®
button = driver.find_element_by_xpath('//*[@id=&quot;toolbar-search-button&quot;]/span')
# æ‰§è¡Œå•å‡»æ“ä½œ
button.click()
</code></pre>
<h2 id="å•å‡»å³é”®">å•å‡»å³é”®</h2>
<p>é¼ æ ‡å³å‡»çš„æ“ä½œä¸å·¦å‡»æœ‰å¾ˆå¤§ä¸åŒï¼Œéœ€è¦ä½¿ç”¨ <code>ActionChains</code> ã€‚</p>
<pre><code class="language-python">from selenium.webdriver.common.action_chains import ActionChains

# å®šä½æœç´¢æŒ‰é’®
button = driver.find_element_by_xpath('//*[@id=&quot;toolbar-search-button&quot;]/span')
# å³é”®æœç´¢æŒ‰é’®
ActionChains(driver).context_click(button).perform()
</code></pre>
<h2 id="åŒå‡»">åŒå‡»</h2>
<p>æ¨¡æ‹Ÿé¼ æ ‡åŒå‡»æ“ä½œ</p>
<pre><code class="language-python"># å®šä½æœç´¢æŒ‰é’®
button = driver.find_element_by_xpath('//*[@id=&quot;toolbar-search-button&quot;]/span')
# æ‰§è¡ŒåŒå‡»åŠ¨ä½œ
ActionChains(driver).double_click(button).perform()
</code></pre>
<h2 id="æ‹–åŠ¨">æ‹–åŠ¨</h2>
<p>æ¨¡æ‹Ÿé¼ æ ‡æ‹–åŠ¨æ“ä½œï¼Œè¯¥æ“ä½œæœ‰ä¸¤ä¸ªå¿…è¦å‚æ•°</p>
<ul>
<li><strong>source</strong>ï¼šé¼ æ ‡æ‹–åŠ¨çš„å…ƒç´ </li>
<li><strong>target</strong>ï¼šé¼ æ ‡æ‹–è‡³å¹¶é‡Šæ”¾çš„ç›®æ ‡å…ƒç´ </li>
</ul>
<pre><code class="language-python"># å®šä½è¦æ‹–åŠ¨çš„å…ƒç´ 
source = driver.find_element_by_xpath('xxx')
# å®šä½ç›®æ ‡å…ƒç´ 
target = driver.find_element_by_xpath('xxx')
# æ‰§è¡Œæ‹–åŠ¨åŠ¨ä½œ
ActionChains(driver).drag_and_drop(source, target).perform()
</code></pre>
<h2 id="é¼ æ ‡æ‚¬åœ">é¼ æ ‡æ‚¬åœ</h2>
<p>æ¨¡æ‹Ÿæ‚¬åœçš„ä½œç”¨ä¸€èˆ¬æ˜¯ä¸ºäº†æ˜¾ç¤ºéšè—çš„ä¸‹æ‹‰æ¡†ã€‚</p>
<pre><code class="language-python"># å®šä½æ”¶è—æ 
collect  = driver.find_element_by_xpath('//*[@id=&quot;csdn-toolbar&quot;]/div/div/div[3]/div/div[3]/a')

# æ‚¬åœè‡³æ”¶è—æ ‡ç­¾å¤„
ActionChains(driver).move_to_element(collect).perform()
</code></pre>
<h1 id="é”®ç›˜æ§åˆ¶">é”®ç›˜æ§åˆ¶</h1>
<p><code>webdriver</code> ä¸­ <code>Keys</code> ç±»å‡ ä¹æä¾›äº†é”®ç›˜ä¸Šçš„æ‰€æœ‰æŒ‰é”®æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>send_keys + Keys</code> å®ç°è¾“å‡ºé”®ç›˜ä¸Šçš„ç»„åˆæŒ‰é”®å¦‚ â€œ<strong>Ctrl + C</strong>â€ã€â€œ<strong>Ctrl + V</strong>â€ ç­‰ã€‚</p>
<pre><code class="language-python">from selenium.webdriver.common.keys import Keys

# å®šä½è¾“å…¥æ¡†å¹¶è¾“å…¥æ–‡æœ¬
driver.find_element_by_id('xxx').send_keys('Dreamä¸¶killer')

# æ¨¡æ‹Ÿå›è½¦é”®è¿›è¡Œè·³è½¬ï¼ˆè¾“å…¥å†…å®¹åï¼‰ 
driver.find_element_by_id('xxx').send_keys(Keys.ENTER)

# ä½¿ç”¨ Backspace æ¥åˆ é™¤ä¸€ä¸ªå­—ç¬¦
driver.find_element_by_id('xxx').send_keys(Keys.BACK_SPACE)

# Ctrl + A å…¨é€‰è¾“å…¥æ¡†ä¸­å†…å®¹
driver.find_element_by_id('xxx').send_keys(Keys.CONTROL, 'a')

# Ctrl + C å¤åˆ¶è¾“å…¥æ¡†ä¸­å†…å®¹
driver.find_element_by_id('xxx').send_keys(Keys.CONTROL, 'c')

# Ctrl + V ç²˜è´´è¾“å…¥æ¡†ä¸­å†…å®¹
driver.find_element_by_id('xxx').send_keys(Keys.CONTROL, 'v')
</code></pre>
<p>å…¶ä»–å¸¸è§é”®ç›˜æ“ä½œï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">æ“ä½œ</th>
<th style="text-align:center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Keys.F1</td>
<td style="text-align:center">F1é”®</td>
</tr>
<tr>
<td style="text-align:center">Keys.SPACE</td>
<td style="text-align:center">ç©ºæ ¼</td>
</tr>
<tr>
<td style="text-align:center">Keys.TAB</td>
<td style="text-align:center">Tabé”®</td>
</tr>
<tr>
<td style="text-align:center">Keys.ESCAPE</td>
<td style="text-align:center">ESCé”®</td>
</tr>
<tr>
<td style="text-align:center">Keys.ALT</td>
<td style="text-align:center">Alté”®</td>
</tr>
<tr>
<td style="text-align:center">Keys.SHIFT</td>
<td style="text-align:center">Shifté”®</td>
</tr>
<tr>
<td style="text-align:center">Keys.ARROW_DOWN</td>
<td style="text-align:center">å‘ä¸‹ç®­å¤´</td>
</tr>
<tr>
<td style="text-align:center">Keys.ARROW_LEFT</td>
<td style="text-align:center">å‘å·¦ç®­å¤´</td>
</tr>
<tr>
<td style="text-align:center">Keys.ARROW_RIGHT</td>
<td style="text-align:center">å‘å³ç®­å¤´</td>
</tr>
<tr>
<td style="text-align:center">Keys.ARROW_UP</td>
<td style="text-align:center">å‘ä¸Šç®­å¤´</td>
</tr>
</tbody>
</table>
<blockquote>
<p>https://juejin.cn/post/7022925905395875847</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ä½¿ç”¨ safari æµè§ˆå™¨å¯¼å‡º Excel æ–‡ä»¶åç¼€ä¼šåŠ ä¸€ä¸ª .html]]></title>
        <id>http://weakcc.github.io/post/shi-yong-safari-liu-lan-qi-dao-chu-excel-wen-jian-hou-zhui-hui-jia-yi-ge-html/</id>
        <link href="http://weakcc.github.io/post/shi-yong-safari-liu-lan-qi-dao-chu-excel-wen-jian-hou-zhui-hui-jia-yi-ge-html/">
        </link>
        <updated>2021-10-28T02:45:52.000Z</updated>
        <content type="html"><![CDATA[<figure data-type="image" tabindex="1"><img src="http://weakcc.github.io/post-images/1635389216714.png" alt="" loading="lazy"></figure>
<p>è§£å†³åŠæ³•</p>
<pre><code class="language-php">header(&quot;Pragma: public&quot;);  
header(&quot;Expires: 0&quot;);  
header(&quot;Cache-Control:must-revalidate, post-check=0, pre-check=0&quot;);  
header(&quot;Content-Type:application/force-download&quot;);  
header(&quot;Content-Type:application/vnd.ms-excel&quot;);  
header(&quot;Content-Type:application/octet-stream&quot;);  
header(&quot;Content-Type:application/download&quot;);;  
header('Content-Disposition:attachment;filename=&quot;'.$filename.'.xls&quot;');
header(&quot;Content-Transfer-Encoding:binary&quot;);
$objWriter-&gt;save('php://output');
exit;
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[PHP åŠ¨æ€è¯­è¨€é™æ€åŒ–]]></title>
        <id>http://weakcc.github.io/post/php-dong-tai-yu-yan-jing-tai-hua/</id>
        <link href="http://weakcc.github.io/post/php-dong-tai-yu-yan-jing-tai-hua/">
        </link>
        <updated>2021-10-26T02:26:40.000Z</updated>
        <summary type="html"><![CDATA[<p>æ–°å»ºæ–‡ä»¶ <code>demo.php</code><br>
æ­£å¸¸è¾“å‡º</p>
<pre><code class="language-php">&lt;p&gt;åœ¨ demo.php æ–‡ä»¶ä¸‹è¾“å‡º html æ–‡æœ¬&lt;/p&gt;
</code></pre>
<p>å¼€å¯è¾“å‡ºæ§åˆ¶ç¼“å†² <code>ob_start</code></p>
<pre><code class="language-php">&lt;?php
    ob_start(); // æ‰“å¼€è¾“å‡ºæ§åˆ¶ç¼“å†²
?&gt;
&lt;p&gt;åœ¨ demo.php æ–‡ä»¶ä¸‹è¾“å‡º html æ–‡æœ¬&lt;/p&gt;
&lt;?php
    $content = ob_get_contents(); // è¿”å›è¾“å‡ºç¼“å†²åŒºçš„å†…å®¹
    ob_end_flush(); // å†²åˆ·å‡ºï¼ˆé€å‡ºï¼‰è¾“å‡ºç¼“å†²åŒºå†…å®¹å¹¶å…³é—­ç¼“å†²
    var_dump($content);
</code></pre>
]]></summary>
        <content type="html"><![CDATA[<p>æ–°å»ºæ–‡ä»¶ <code>demo.php</code><br>
æ­£å¸¸è¾“å‡º</p>
<pre><code class="language-php">&lt;p&gt;åœ¨ demo.php æ–‡ä»¶ä¸‹è¾“å‡º html æ–‡æœ¬&lt;/p&gt;
</code></pre>
<p>å¼€å¯è¾“å‡ºæ§åˆ¶ç¼“å†² <code>ob_start</code></p>
<pre><code class="language-php">&lt;?php
    ob_start(); // æ‰“å¼€è¾“å‡ºæ§åˆ¶ç¼“å†²
?&gt;
&lt;p&gt;åœ¨ demo.php æ–‡ä»¶ä¸‹è¾“å‡º html æ–‡æœ¬&lt;/p&gt;
&lt;?php
    $content = ob_get_contents(); // è¿”å›è¾“å‡ºç¼“å†²åŒºçš„å†…å®¹
    ob_end_flush(); // å†²åˆ·å‡ºï¼ˆé€å‡ºï¼‰è¾“å‡ºç¼“å†²åŒºå†…å®¹å¹¶å…³é—­ç¼“å†²
    var_dump($content);
</code></pre>
<!--more-->
<p>æŠŠç¼“å­˜å†™å…¥æ–‡ä»¶</p>
<pre><code class="language-php">&lt;?php
    $cache_name = md5(__FILE__) . '.html';

    ob_start(); // æ‰“å¼€è¾“å‡ºæ§åˆ¶ç¼“å†²
?&gt;
&lt;p&gt;åœ¨ demo.php æ–‡ä»¶ä¸‹è¾“å‡º html æ–‡æœ¬&lt;/p&gt;
&lt;?php
    $content = ob_get_contents(); // è¿”å›è¾“å‡ºç¼“å†²åŒºçš„å†…å®¹
    ob_end_flush(); // å†²åˆ·å‡ºï¼ˆé€å‡ºï¼‰è¾“å‡ºç¼“å†²åŒºå†…å®¹å¹¶å…³é—­ç¼“å†²

    $handle = fopen($cache_name, 'w');
    fwrite($handle, $content);
    fclose($handle);
</code></pre>
<pre><code>var_dump($cache_name);
</code></pre>
<p>è¿è¡Œåç”Ÿæˆä¸´æ—¶æ–‡ä»¶ <code>xxxx.html</code> ç¼“å­˜</p>
<p>å…³é”®ç¼“å­˜åˆ¤æ–­</p>
<pre><code class="language-php">&lt;?php
    $cache_name = md5(__FILE__) . '.html';
    $cache_lifetime = 3600;
    // filectime() å‡½æ•°è¿”å›æŒ‡å®šæ–‡ä»¶çš„ä¸Šæ¬¡ä¿®æ”¹æ—¶é—´
    if (file_exists($cache_name)
        &amp;&amp; filectime(__FILE__) &lt;= filectime($cache_name)
        &amp;&amp; filectime($cache_name) + $cache_lifetime &gt; time()) {
        // ç¼“å­˜æ–‡ä»¶å­˜åœ¨
        // å½“å‰æ–‡ä»¶æ˜¯å¦æœ‰ä¿®æ”¹ï¼ˆæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´å°äºç¼“å­˜æ–‡ä»¶çš„ä¿®æ”¹é—®ï¼‰
        // ç¼“å­˜æ–‡ä»¶æ˜¯å¦å·²ç»è¿‡æœŸ
        include $cache_name;
        exit;
    }

    ob_start(); // æ‰“å¼€è¾“å‡ºæ§åˆ¶ç¼“å†²
?&gt;
&lt;p&gt;åœ¨ demo.php æ–‡ä»¶ä¸‹è¾“å‡º html æ–‡æœ¬&lt;/p&gt;
&lt;?php
    $content = ob_get_contents(); // è¿”å›è¾“å‡ºç¼“å†²åŒºçš„å†…å®¹
    ob_end_flush(); // å†²åˆ·å‡ºï¼ˆé€å‡ºï¼‰è¾“å‡ºç¼“å†²åŒºå†…å®¹å¹¶å…³é—­ç¼“å†²

    $handle = fopen($cache_name, 'w');
    fwrite($handle, $content);
    fclose($handle);
</code></pre>
<p>æ ¹æ®ä¸åŒçš„ç”¨æˆ· <code>id</code> åšä¸åŒçš„ç¼“å­˜</p>
<pre><code class="language-php">&lt;?php
    $id = intval($_GET['id']);
    if (empty($id)) {
        $id = '';
    }

    $cache_name = md5(__FILE__) . '-' . $id .'.html';
    $cache_lifetime = 3600;
    // filectime() å‡½æ•°è¿”å›æŒ‡å®šæ–‡ä»¶çš„ä¸Šæ¬¡ä¿®æ”¹æ—¶é—´
    if (file_exists($cache_name)
        &amp;&amp; filectime(__FILE__) &lt;= filectime($cache_name)
        &amp;&amp; filectime($cache_name) + $cache_lifetime &gt; time()) {
        // ç¼“å­˜æ–‡ä»¶å­˜åœ¨
        // å½“å‰æ–‡ä»¶æ˜¯å¦æœ‰ä¿®æ”¹ï¼ˆæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´å°äºç¼“å­˜æ–‡ä»¶çš„ä¿®æ”¹é—®ï¼‰
        // ç¼“å­˜æ–‡ä»¶æ˜¯å¦å·²ç»è¿‡æœŸ
        include $cache_name;
        exit;
    }

    ob_start(); // æ‰“å¼€è¾“å‡ºæ§åˆ¶ç¼“å†²
?&gt;
&lt;p&gt;åœ¨ demo.php æ–‡ä»¶ä¸‹è¾“å‡º html æ–‡æœ¬. &lt;?php echo $id?&gt;&lt;/p&gt;
&lt;?php
    $content = ob_get_contents(); // è¿”å›è¾“å‡ºç¼“å†²åŒºçš„å†…å®¹
    ob_end_flush(); // å†²åˆ·å‡ºï¼ˆé€å‡ºï¼‰è¾“å‡ºç¼“å†²åŒºå†…å®¹å¹¶å…³é—­ç¼“å†²

    $handle = fopen($cache_name, 'w');
    fwrite($handle, $content);
    fclose($handle);
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[API é˜²ç¯¡æ”¹å’Œé˜²é‡æ”¾]]></title>
        <id>http://weakcc.github.io/post/api-fang-cuan-gai-he-fang-chong-fang/</id>
        <link href="http://weakcc.github.io/post/api-fang-cuan-gai-he-fang-chong-fang/">
        </link>
        <updated>2021-10-26T01:00:36.000Z</updated>
        <summary type="html"><![CDATA[<h1 id="é˜²ç¯¡æ”¹">é˜²ç¯¡æ”¹</h1>
<p>ç­¾åæ ¡éªŒ</p>
]]></summary>
        <content type="html"><![CDATA[<h1 id="é˜²ç¯¡æ”¹">é˜²ç¯¡æ”¹</h1>
<p>ç­¾åæ ¡éªŒ</p>
<!-- more -->
<h1 id="é˜²é‡é˜²">é˜²é‡é˜²</h1>
<h2 id="timestampnonce">timestamp+nonce</h2>
<p>æˆ‘ä»¬å¸¸ç”¨çš„é˜²æ­¢é‡æ”¾çš„æœºåˆ¶æ˜¯ä½¿ç”¨ timestamp å’Œ nonce æ¥åšçš„é‡æ”¾æœºåˆ¶ã€‚</p>
<!-- more -->
<p>timestamp ç”¨æ¥è¡¨ç¤ºè¯·æ±‚çš„å½“å‰æ—¶é—´æˆ³ï¼Œè¿™ä¸ªæ—¶é—´æˆ³å½“ç„¶è¦å’ŒæœåŠ¡å™¨æ—¶é—´æˆ³è¿›è¡Œæ ¡æ­£è¿‡çš„ã€‚æˆ‘ä»¬é¢„æœŸæ­£å¸¸è¯·æ±‚å¸¦çš„ timestamp å‚æ•°ä¼šæ˜¯ä¸åŒçš„ï¼ˆé¢„æœŸæ˜¯æ­£å¸¸çš„äººæ¯ç§’è‡³å¤šåªä¼šåšä¸€ä¸ªæ“ä½œï¼‰ã€‚æ¯ä¸ªè¯·æ±‚å¸¦çš„æ—¶é—´æˆ³ä¸èƒ½å’Œå½“å‰æ—¶é—´è¶…è¿‡ä¸€å®šè§„å®šçš„æ—¶é—´ã€‚æ¯”å¦‚ 60sã€‚è¿™æ ·ï¼Œè¿™ä¸ªè¯·æ±‚å³ä½¿è¢«æˆªå–äº†ï¼Œä½ ä¹Ÿåªèƒ½åœ¨ 60s å†…è¿›è¡Œé‡æ”¾æ”»å‡»ã€‚è¿‡æœŸå¤±æ•ˆã€‚</p>
<p>ä½†æ˜¯è¿™æ ·ä¹Ÿæ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜æœ‰ç»™æ”»å‡»è€… 60s çš„æ—¶é—´ã€‚æ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ä¸€ä¸ª nonceï¼Œéšæœºæ•°ã€‚</p>
<p>nonce æ˜¯ç”±å®¢æˆ·ç«¯æ ¹æ®è¶³å¤Ÿéšæœºçš„æƒ…å†µç”Ÿæˆçš„ï¼Œæ¯”å¦‚ md5 (timestamp+rand (0, 1000)); å®ƒå°±æœ‰ä¸€ä¸ªè¦æ±‚ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œåœ¨çŸ­æ—¶é—´å†…ï¼ˆæ¯”å¦‚ 60sï¼‰è¿ç»­ç”Ÿæˆä¸¤ä¸ªç›¸åŒ nonce çš„æƒ…å†µå‡ ä¹ä¸º 0ã€‚</p>
<h2 id="æœåŠ¡ç«¯">æœåŠ¡ç«¯</h2>
<p>æœåŠ¡ç«¯ç¬¬ä¸€æ¬¡åœ¨æ¥æ”¶åˆ°è¿™ä¸ª nonce çš„æ—¶å€™åšä¸‹é¢è¡Œä¸ºï¼š<br>
1 å» redis ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰ key ä¸º nonce:{nonce} çš„ string<br>
2 å¦‚æœæ²¡æœ‰ï¼Œåˆ™åˆ›å»ºè¿™ä¸ª keyï¼ŒæŠŠè¿™ä¸ª key å¤±æ•ˆçš„æ—¶é—´å’ŒéªŒè¯ timestamp å¤±æ•ˆçš„æ—¶é—´ä¸€è‡´ï¼Œæ¯”å¦‚æ˜¯ 60sã€‚<br>
3 å¦‚æœæœ‰ï¼Œè¯´æ˜è¿™ä¸ª key åœ¨ 60s å†…å·²ç»è¢«ä½¿ç”¨äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªè¯·æ±‚å°±å¯ä»¥åˆ¤æ–­ä¸ºé‡æ”¾è¯·æ±‚ã€‚</p>
<blockquote>
<p>https://www.jianshu.com/p/de9295087560<br>
https://learnku.com/articles/4196/talk-about-the-anti-replay-mechanism-of-api</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[PHP cURL]]></title>
        <id>http://weakcc.github.io/post/php-curl/</id>
        <link href="http://weakcc.github.io/post/php-curl/">
        </link>
        <updated>2021-10-26T00:54:38.000Z</updated>
        <summary type="html"><![CDATA[<h1 id="curl">cURL</h1>
<h2 id="get">GET</h2>
<pre><code class="language-php">/**
 * @param string $url è¯·æ±‚ url
 * @param int $httpCode çŠ¶æ€ç 
 * @return mixed
 */
function curl_get($url, &amp;$httpCode = 404)
{
    // åˆå§‹åŒ–ä¸€ä¸ªcurlä¼šè¯
    $ch = curl_init();

    // éœ€è¦è·å–çš„urlåœ°å€
    curl_setopt($ch, CURLOPT_URL, $url);
    // å¯ç”¨ è¿”å›åŸç”Ÿçš„(raw)è¾“å‡º
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

    //ä¸åšè¯ä¹¦æ ¡éªŒ,éƒ¨ç½²åœ¨linuxç¯å¢ƒä¸‹è¯·æ”¹ä¸ºtrue
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    // åœ¨å‘èµ·è¿æ¥å‰ç­‰å¾…çš„æ—¶é—´ï¼Œå¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™æ— é™ç­‰å¾…
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 5);

    // 	æ‰§è¡Œä¸€ä¸ªcurlä¼šè¯
    $fileContents = curl_exec($ch);
    // è·å–ä¸€ä¸ªcurlè¿æ¥èµ„æºå¥æŸ„çš„ä¿¡æ¯
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);

    // å…³é—­ä¸€ä¸ªcurlä¼šè¯
    curl_close($ch);
    return $fileContents;
}

$statusCode = 0;
var_dump(curl_get('http://www.baidu.com/', $statusCode));
var_dump($statusCode);
</code></pre>
]]></summary>
        <content type="html"><![CDATA[<h1 id="curl">cURL</h1>
<h2 id="get">GET</h2>
<pre><code class="language-php">/**
 * @param string $url è¯·æ±‚ url
 * @param int $httpCode çŠ¶æ€ç 
 * @return mixed
 */
function curl_get($url, &amp;$httpCode = 404)
{
    // åˆå§‹åŒ–ä¸€ä¸ªcurlä¼šè¯
    $ch = curl_init();

    // éœ€è¦è·å–çš„urlåœ°å€
    curl_setopt($ch, CURLOPT_URL, $url);
    // å¯ç”¨ è¿”å›åŸç”Ÿçš„(raw)è¾“å‡º
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

    //ä¸åšè¯ä¹¦æ ¡éªŒ,éƒ¨ç½²åœ¨linuxç¯å¢ƒä¸‹è¯·æ”¹ä¸ºtrue
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    // åœ¨å‘èµ·è¿æ¥å‰ç­‰å¾…çš„æ—¶é—´ï¼Œå¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™æ— é™ç­‰å¾…
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 5);

    // 	æ‰§è¡Œä¸€ä¸ªcurlä¼šè¯
    $fileContents = curl_exec($ch);
    // è·å–ä¸€ä¸ªcurlè¿æ¥èµ„æºå¥æŸ„çš„ä¿¡æ¯
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);

    // å…³é—­ä¸€ä¸ªcurlä¼šè¯
    curl_close($ch);
    return $fileContents;
}

$statusCode = 0;
var_dump(curl_get('http://www.baidu.com/', $statusCode));
var_dump($statusCode);
</code></pre>
<!-- more -->
<h2 id="post">POST</h2>
<pre><code class="language-php">/**
 * @param string $url è¯·æ±‚ url
 * @param array $params å‚æ•°
 * @return mixed
 */
function curl_post(string $url, array $params = [])
{
    // åˆå§‹åŒ–ä¸€ä¸ªcurlä¼šè¯
    $ch = curl_init();

    // éœ€è¦è·å–çš„urlåœ°å€
    curl_setopt($ch, CURLOPT_URL, $url);
    // å¯ç”¨æ—¶ä¼šå°†å¤´æ–‡ä»¶çš„ä¿¡æ¯ä½œä¸ºæ•°æ®æµè¾“å‡º
    curl_setopt($ch, CURLOPT_HEADER, 0);
    // å¯ç”¨ è¿”å›åŸç”Ÿçš„(raw)è¾“å‡º
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    //ä¸åšè¯ä¹¦æ ¡éªŒ,éƒ¨ç½²åœ¨linuxç¯å¢ƒä¸‹è¯·æ”¹ä¸ºtrue
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    // åœ¨å‘èµ·è¿æ¥å‰ç­‰å¾…çš„æ—¶é—´ï¼Œå¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™æ— é™ç­‰å¾…
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 5);
    // å¯ç”¨æ—¶ä¼šå‘é€ä¸€ä¸ªå¸¸è§„çš„POSTè¯·æ±‚ï¼Œç±»å‹ä¸ºï¼šapplication/x-www-form-urlencodedï¼Œå°±åƒè¡¨å•æäº¤çš„ä¸€æ ·
    curl_setopt($ch, CURLOPT_POST, 1);
    // å…¨éƒ¨æ•°æ®ä½¿ç”¨HTTPåè®®ä¸­çš„&quot;POST&quot;æ“ä½œæ¥å‘é€ã€‚è¦å‘é€æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶åå‰é¢åŠ ä¸Š@å‰ç¼€å¹¶ä½¿ç”¨å®Œæ•´è·¯å¾„ã€‚è¿™ä¸ªå‚æ•°å¯ä»¥é€šè¿‡urlencodedåçš„å­—ç¬¦ä¸²ç±»ä¼¼'para1=val1&amp;para2=val2&amp;...'æˆ–ä½¿ç”¨ä¸€ä¸ªä»¥å­—æ®µåä¸ºé”®å€¼ï¼Œå­—æ®µæ•°æ®ä¸ºå€¼çš„æ•°ç»„ã€‚å¦‚æœvalueæ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒContent-Typeå¤´å°†ä¼šè¢«è®¾ç½®æˆmultipart/form-data
    // ä¼ é€’ä¸€ä¸ªæ•°ç»„åˆ°CURLOPT_POSTFIELDSï¼ŒcURLä¼šæŠŠæ•°æ®ç¼–ç æˆ multipart/form-dataï¼Œè€Œç„¶ä¼ é€’ä¸€ä¸ªURL-encodedå­—ç¬¦ä¸²æ—¶ï¼Œæ•°æ®ä¼šè¢«ç¼–ç æˆ application/x-www-form-urlencoded
    curl_setopt($ch, CURLOPT_POSTFIELDS, $params);

    /*
    // æˆ–è€…ä¼ é€’ä¸€ä¸ª json ç±»å‹ $params è¦ json_encode() è½¬ä¹‰
    curl_setopt($ch, CURLOPT_HTTPHEADER, [
        'Content-Type: application/json' // ä¸€ä¸ªç”¨æ¥è®¾ç½®HTTPå¤´å­—æ®µçš„æ•°ç»„
    ]);
    */
    // 	æ‰§è¡Œä¸€ä¸ªcurlä¼šè¯
    $contents = curl_exec($ch);
    // å…³é—­ä¸€ä¸ªcurlä¼šè¯
    curl_close($ch);
    return $contents;
}

$url = 'xxxxx'; // æäº¤çš„ url
$data = array('name' =&gt; 'Foo', 'file' =&gt; '@/home/user/test.png');
var_dump(curl_post($url, $data));
</code></pre>
<h2 id="raw">Raw</h2>
<pre><code class="language-php">/**
 * @param string $url è¯·æ±‚ url
 * @param string $data å‚æ•°
 * @return mixed
 */
function curl_post_raw(string $url, string $data)
{
    // åˆå§‹åŒ–ä¸€ä¸ªcurlä¼šè¯
    $ch = curl_init();

    // éœ€è¦è·å–çš„urlåœ°å€
    curl_setopt($ch, CURLOPT_URL, $url);
    // å¯ç”¨æ—¶ä¼šå°†å¤´æ–‡ä»¶çš„ä¿¡æ¯ä½œä¸ºæ•°æ®æµè¾“å‡º
    curl_setopt($ch, CURLOPT_HEADER, 0);
    // å¯ç”¨ è¿”å›åŸç”Ÿçš„(raw)è¾“å‡º
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    //ä¸åšè¯ä¹¦æ ¡éªŒ,éƒ¨ç½²åœ¨linuxç¯å¢ƒä¸‹è¯·æ”¹ä¸ºtrue
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    // åœ¨å‘èµ·è¿æ¥å‰ç­‰å¾…çš„æ—¶é—´ï¼Œå¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™æ— é™ç­‰å¾…
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 5);
    // å¯ç”¨æ—¶ä¼šå‘é€ä¸€ä¸ªå¸¸è§„çš„POSTè¯·æ±‚ï¼Œç±»å‹ä¸ºï¼šapplication/x-www-form-urlencodedï¼Œå°±åƒè¡¨å•æäº¤çš„ä¸€æ ·
    curl_setopt($ch, CURLOPT_POST, 1);

    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    // // ä¸€ä¸ªç”¨æ¥è®¾ç½®HTTPå¤´å­—æ®µçš„æ•°ç»„
    curl_setopt($ch, CURLOPT_HTTPHEADER, [
        'Content-Type: text'
    ]);
    // 	æ‰§è¡Œä¸€ä¸ªcurlä¼šè¯
    $contents = curl_exec($ch);
    // å…³é—­ä¸€ä¸ªcurlä¼šè¯
    curl_close($ch);
    return $contents;
}
</code></pre>
<h2 id="å¯ä»¥è®¿é—®è¯·æ±‚çš„åŸå§‹æ•°æ®çš„åªè¯»æµ">å¯ä»¥è®¿é—®è¯·æ±‚çš„åŸå§‹æ•°æ®çš„åªè¯»æµ</h2>
<pre><code class="language-php">file_get_contents(&quot;php://input&quot;)
</code></pre>
]]></content>
    </entry>
</feed>